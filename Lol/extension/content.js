(()=>{"use strict";var e,t,n=function(){return(n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function o(t){var n=t.type;n===e.DESTROY&&postMessage({id:"xhr-mock-extension-ui-message",type:n},"*"),n===e.MOCK&&new Promise((function(e,t){if(void 0===window.xhrMockApi){var n=document.createElement("script");n.id="xhrMockApi",document.getElementsByTagName("body")[0].appendChild(n),n.src=chrome.extension.getURL("broswer/xhr-mock.js"),n.onload=function(){e()},n.onerror=function(){t()}}else e()})).then((function(){var e=(t.timeout?t.timeout.split("-"):[]).filter((function(e){return""!==e})).map((function(e){return parseInt(e,10)})),n=0;e.length<1&&(e=[100,200]),2===e.length?n=Math.floor(Math.random()*Math.abs(e[0]-e[1]))+Math.min(e[0],e[1]):1===e.length&&(n=e[0]),postMessage({id:"xhr-mock-extension-ui-message",type:t.type,mockURL:t.mockURL,status:t.status?parseInt(t.status,10):0,response:JSON.stringify(t.response),delay:n},"*")})).catch((function(e){console.log("xhrMockApi error",e)}))}!function(e){e.MOCK="MOCK",e.DESTROY="DESTROY"}(e||(e={})),function(e){e.CHECK_STATE="CHECK_STATE",e.DESTROY_MOCK="DESTROY_MOCK"}(t||(t={})),chrome.runtime.onMessage.addListener((function(r,s,i){switch(r.type){case t.CHECK_STATE:i(JSON.stringify({href:window.location.href}));break;case t.DESTROY_MOCK:o({type:e.DESTROY}),i("ok");break;case e.MOCK:default:var a=JSON.parse(r.response);o(n(n({},r),{response:a,type:e.MOCK})),i("ok")}}))})();