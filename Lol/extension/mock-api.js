!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=6)}({6:function(e,t,o){"use strict";o.r(t);o(7);let n={},r=!1,a=!1;const c={setData(e){chrome.storage.local.set({enable:e},()=>{console.log("Value is set to "+e)})},getData(){chrome.storage.local.get(["enable"],e=>{a="boolean"!=typeof e.enable||e.enable,s.enabledState(a)})},saveRecord(e){localStorage.setItem("mockExtensionData",JSON.stringify(e))}},s={classControl(e,t){t?e.classList.remove("label--warning"):e.classList.add("label--warning")},getInputValue:()=>({mockURL:n.mockURL.value.trim(),status:n.status.value.trim(),response:n.response.value.trim(),timeout:n.timeout.value.trim()||"100-200"}),verify(){const{mockURL:e,status:t,response:o,timeout:n}=s.getInputValue(),r=!!e,a=!!t;let c=!!o;try{JSON.parse(o)}catch(e){c=!1}return s.classControl(document.querySelector(".label-url"),r),s.classControl(document.querySelector(".label-status"),a),s.classControl(document.querySelector(".label-response"),c),{response:o,mockURL:e,timeout:n,status:t}},handleMockClick(e){r=!0;const{response:t,mockURL:o,timeout:n,status:a}=s.verify();if(!o||!t||!a)return void new Notification("請確認欄位是否設定完成",{icon:"../icon48.png"});try{JSON.parse(t)}catch(e){return void new Notification("Response 需要 JSON 字串",{icon:"../icon48.png"})}const c={response:t,mockURL:o,timeout:n,status:a};chrome.tabs.query({active:!0,currentWindow:!0},e=>{chrome.tabs.sendMessage(e[0].id,{...c,type:"mock"},e=>{})}),setTimeout(window.close,100)},handleChange(e){const t=s.getInputValue();c.saveRecord(t),r&&s.verify()},enabledState(e){if("interactive"!==document.readyState&&"complete"!==document.readyState)return;const t=document.querySelector("#main"),o=document.querySelector("#enableSwitch");e?(t.style.display=null,o.checked=!0):(t.style.display="none",o.checked=!1)},DOMContentLoaded(){n={mockURL:document.querySelector("#mockURL"),status:document.querySelector("#status"),response:document.querySelector("#response"),timeout:document.querySelector("#timeout")},s.enabledState(a);let e={response:"",mockURL:"",timeout:"100-200",status:"200"};try{e=JSON.parse(localStorage.getItem("mockExtensionData"))||e}catch(e){localStorage.removeItem("mockExtensionData")}try{n.response.value=JSON.stringify(JSON.parse(e.response),null,2)}catch(t){n.response.value=e.response}n.mockURL.value=e.mockURL,n.timeout.value=e.timeout,n.status.value=e.status;const t=document.querySelectorAll("#btn");for(var o=0;o<t.length;o++)t[o].addEventListener("click",s.handleMockClick);document.querySelector("#enableSwitch").addEventListener("change",e=>{e.target.checked!==a&&(a=e.target.checked,c.setData(a),s.enabledState(a))}),Object.keys(n).forEach(e=>{n[e].addEventListener("change",s.handleChange),n[e].addEventListener("keyup",s.handleChange)})}};c.getData(),document.addEventListener("DOMContentLoaded",s.DOMContentLoaded)},7:function(e,t,o){}});